<html>
    <head> 
        <meta charset="UTF-8" />
        <title>tower</title>
        <script src="phaser.min.js"></script>
        <script src="dat.gui.min.js"></script>
        <style type="text/css">
            body {
                margin: 0;
            }
        </style>
    </head>

<body>

<script type="text/javascript">
var config = {
    type: Phaser.AUTO,
    width: 800,
    height: 600,
    parent: 'phaser-example',
    physics: {
        default: 'arcade',
        arcade: {
            debug: false,
            gravity: { y: 0 }
        }
    },
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};

var game = new Phaser.Game(config);
function preload ()
{
    this.load.spritesheet('tower', 'assets/107502.png', { frameWidth: 192, frameHeight: 16 });
    this.load.image('bg', 'assets/bg.png');
}

function create ()
{
    background = this.add.tileSprite(0, 100, 1920, 1080, 'bg');
   var config = {
       key: 'animation',
       frames: this.anims.generateFrameNumbers('tower'),
       frameRate: 8,
       repeat: -1
   }
   console.log(config);

   anim = this.anims.create(config);
   var sprite = [];
   for (let index = 0; index < 20; index++) {
    sprite[index] = this.add.sprite(400,600-index*16*2, 'tower').setScale(2);
    sprite[index].anims.load('animation');
    sprite[index].anims.play('animation', false, (index*5)%16);
   }

}
var iter = 0;
function update (){
    background.tilePositionX = iter;
    iter++;
    }
</script>
</body>
</html>